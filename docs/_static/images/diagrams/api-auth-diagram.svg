<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="365px" preserveAspectRatio="none" style="width:672px;height:365px;" version="1.1" viewBox="0 0 672 365" width="672px" zoomAndPan="magnify"><defs><filter height="300%" id="f15wvvjrxjsrih" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="179" x="254" y="16.708">Local Nuts Node CLI</text><!--MD5=[5bdf219cc3b76c81b283dcec53599e99]
cluster Local--><rect fill="#FFFFFF" filter="url(#f15wvvjrxjsrih)" height="318" style="stroke: #000000; stroke-width: 1.5;" width="350" x="14" y="36.9531"/><path d="M65,37.9531 L65,46.25 L55,56.25 L14,56.25 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="17" y="50.9482">Local</text><!--MD5=[d7f06cc0994be04fdc63ab5d20b301e2]
cluster Remote--><rect fill="#FFFFFF" filter="url(#f15wvvjrxjsrih)" height="294" style="stroke: #000000; stroke-width: 1.5;" width="146" x="515" y="59.4531"/><path d="M585,60.4531 L585,68.75 L575,78.75 L515,78.75 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="60" x="518" y="73.4482">Remote</text><!--MD5=[79a439086b036a57b90a01d7b2f8bbd1]
entity admin--><ellipse cx="44" cy="73.4531" fill="#FEFECE" filter="url(#f15wvvjrxjsrih)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M44,81.4531 L44,108.4531 M31,89.4531 L57,89.4531 M44,108.4531 L31,123.4531 M44,108.4531 L57,123.4531 " fill="none" filter="url(#f15wvvjrxjsrih)" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="22.5" y="141.9482">Admin</text><!--MD5=[c251b62818238b6f79269adc5bf7d1e2]
entity cli--><rect fill="#FEFECE" filter="url(#f15wvvjrxjsrih)" height="47.9375" style="stroke: #A80036; stroke-width: 1.5;" width="144" x="212" y="80.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="20" x="222" y="103.4482">CLI</text><text fill="#000000" font-family="sans-serif" font-size="10" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="124" x="222" y="116.0322">Admin tool for Nuts Node</text><!--MD5=[a1f1db06445c25ee67459760314976d5]
entity ssh_agent--><rect fill="#FEFECE" filter="url(#f15wvvjrxjsrih)" height="47.9375" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="185.5" y="298.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="195.5" y="321.9482">ssh-agent</text><text fill="#000000" font-family="sans-serif" font-size="10" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="107" x="195.5" y="334.5322">Manages private keys</text><!--MD5=[885534b20a890cf314c9a5b140ec18ce]
entity keys--><path d="M63.5,310.4531 C63.5,300.4531 90,300.4531 90,300.4531 C90,300.4531 116.5,300.4531 116.5,310.4531 L116.5,335.75 C116.5,345.75 90,345.75 90,345.75 C90,345.75 63.5,345.75 63.5,335.75 L63.5,310.4531 " fill="#FEFECE" filter="url(#f15wvvjrxjsrih)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M63.5,310.4531 C63.5,320.4531 90,320.4531 90,320.4531 C90,320.4531 116.5,320.4531 116.5,310.4531 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="73.5" y="337.4482">Keys</text><!--MD5=[595cc88984bb5959e6f5746a298d46a0]
entity nuts_node--><rect fill="#FEFECE" filter="url(#f15wvvjrxjsrih)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="532.5" y="86.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="542.5" y="109.4482">Nuts Node</text><!--MD5=[13ba4e45b90f580a911d9c4160e5c2d0]
entity allowed_signers--><path d="M523.5,310.4531 C523.5,300.4531 588,300.4531 588,300.4531 C588,300.4531 652.5,300.4531 652.5,310.4531 L652.5,335.75 C652.5,345.75 588,345.75 588,345.75 C588,345.75 523.5,345.75 523.5,335.75 L523.5,310.4531 " fill="#FEFECE" filter="url(#f15wvvjrxjsrih)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M523.5,310.4531 C523.5,320.4531 588,320.4531 588,320.4531 C588,320.4531 652.5,320.4531 652.5,310.4531 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="533.5" y="337.4482">Allowed Signers</text><!--MD5=[b6f14a7fc794ae5783e0144e91239e58]
link admin to cli--><path d="M65.7217,104.4531 C97.3478,104.4531 157.6662,104.4531 206.8942,104.4531 " fill="none" id="admin-&gt;cli" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="211.9254,104.4531,202.9254,100.4531,206.9254,104.4531,202.9254,108.4531,211.9254,104.4531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="83.75" y="86.52">Invoke command</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="31" x="123.25" y="98.8682">[Shell]</text><!--MD5=[ecce556b4bdfa62632e7623a06b32907]
link cli to ssh_agent--><path d="M280.1207,128.6713 C273.6557,169.0308 260.7005,249.9085 253.7178,293.5004 " fill="none" id="cli-&gt;ssh_agent" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="252.8967,298.6265,258.2699,290.3725,253.6876,293.6895,250.3706,289.1071,252.8967,298.6265" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="286.5" y="221.02">Sign token</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="105" x="268" y="233.3682">[SSH Agent Protocol]</text><!--MD5=[7b422794e3238d5cdac11e709aff95c7]
link cli to nuts_node--><path d="M356.1651,104.4531 C409.1593,104.4531 479.8883,104.4531 527.3168,104.4531 " fill="none" id="cli-&gt;nuts_node" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="532.4064,104.4531,523.4064,100.4531,527.4064,104.4531,523.4064,108.4531,532.4064,104.4531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="374.25" y="120.52">Perform API operation</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="76" x="406.25" y="132.8682">[HTTP with JWT]</text><!--MD5=[58e02dc3b515240c3883c2ec8173c55d]
reverse link keys to ssh_agent--><path d="M122.0659,322.9531 C140.1973,322.9531 163.5179,322.9531 185.2126,322.9531 " fill="none" id="keys&lt;-ssh_agent" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="116.613,322.9531,125.613,326.9531,121.613,322.9531,125.613,318.9531,116.613,322.9531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="135" y="316.02">Uses</text><!--MD5=[e93fbe052f21b9652383fce20e0b5a66]
link nuts_node to allowed_signers--><path d="M579.7519,122.7065 C581.3302,161.0256 584.9969,250.0435 586.8638,295.3684 " fill="none" id="nuts_node-&gt;allowed_signers" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="587.0714,300.4087,590.6975,291.2517,586.8655,295.413,582.7042,291.581,587.0714,300.4087" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="585" y="219.02">Verifies JWT</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="604" y="234.1528">using</text><!--MD5=[2201ab21963037c84fe3132dfba840b9]
@startuml
title Local Nuts Node CLI

frame Local {
    actor admin as "Admin"
    agent cli as "CLI\n<size:10><i>Admin tool for Nuts Node"
    agent ssh_agent as "ssh-agent\n<size:10><i>Manages private keys"
    database keys as "Keys"
}

frame "Remote" {
    agent nuts_node as "Nuts Node"
    database allowed_signers as "Allowed Signers"
}

admin -> cli : Invoke command\n<size:10>[Shell]
cli -down-> ssh_agent : Sign token\n<size:10>[SSH Agent Protocol]
cli -> nuts_node : Perform API operation\n<size:10>[HTTP with JWT]
ssh_agent -left-> keys : Uses
nuts_node -down-> allowed_signers : Verifies JWT\nusing
@enduml

PlantUML version 1.2020.06(Sun Apr 05 12:38:32 GMT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 14-ea+33
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>