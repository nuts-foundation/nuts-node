.. table:: Server Options
    :widths: 20 30 50
    :class: options-table

    ==============================================      =================================================================================================================================================================================================================================================================================================================================================================================================      ================================================================================================================================================================================================================================================================================================================================
    Key                                                 Default                                                                                                                                                                                                                                                                                                                                                                                                Description                                                                                                                                                                                                                                                                                                                     
    ==============================================      =================================================================================================================================================================================================================================================================================================================================================================================================      ================================================================================================================================================================================================================================================================================================================================
    configfile                                          nuts.yaml                                                                                                                                                                                                                                                                                                                                                                                              Nuts config file                                                                                                                                                                                                                                                                                                                
    cpuprofile                                                                                                                                                                                                                                                                                                                                                                                                                                                 When set, a CPU profile is written to the given path. Ignored when strictmode is set.                                                                                                                                                                                                                                           
    datadir                                             ./data                                                                                                                                                                                                                                                                                                                                                                                                 Directory where the node stores its files.                                                                                                                                                                                                                                                                                      
    internalratelimiter                                 true                                                                                                                                                                                                                                                                                                                                                                                                   When set, expensive internal calls are rate-limited to protect the network. Always enabled in strict mode.                                                                                                                                                                                                                      
    loggerformat                                        text                                                                                                                                                                                                                                                                                                                                                                                                   Log format (text, json)                                                                                                                                                                                                                                                                                                         
    strictmode                                          true                                                                                                                                                                                                                                                                                                                                                                                                   When set, insecure settings are forbidden.                                                                                                                                                                                                                                                                                      
    url                                                                                                                                                                                                                                                                                                                                                                                                                                                        Public facing URL of the server (required). Must be HTTPS when strictmode is set.                                                                                                                                                                                                                                               
    verbosity                                           info                                                                                                                                                                                                                                                                                                                                                                                                   Log level (trace, debug, info, warn, error)                                                                                                                                                                                                                                                                                     
    httpclient.timeout                                  30s                                                                                                                                                                                                                                                                                                                                                                                                    Request time-out for HTTP clients, such as '10s'. Refer to Golang's 'time.Duration' syntax for a more elaborate description of the syntax.                                                                                                                                                                                      
    tls.certfile                                                                                                                                                                                                                                                                                                                                                                                                                                               PEM file containing the certificate for the server (also used as client certificate).                                                                                                                                                                                                                                           
    tls.certheader                                                                                                                                                                                                                                                                                                                                                                                                                                             Name of the HTTP header that will contain the client certificate when TLS is offloaded.                                                                                                                                                                                                                                         
    tls.certkeyfile                                                                                                                                                                                                                                                                                                                                                                                                                                            PEM file containing the private key of the server certificate.                                                                                                                                                                                                                                                                  
    tls.offload                                                                                                                                                                                                                                                                                                                                                                                                                                                Whether to enable TLS offloading for incoming connections. Enable by setting it to 'incoming'. If enabled 'tls.certheader' must be configured as well.                                                                                                                                                                          
    tls.truststorefile                                  truststore.pem                                                                                                                                                                                                                                                                                                                                                                                         PEM file containing the trusted CA certificates for authenticating remote servers.                                                                                                                                                                                                                                              
    **Auth**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
    auth.accesstokenlifespan                            60                                                                                                                                                                                                                                                                                                                                                                                                     defines how long (in seconds) an access token is valid. Uses default in strict mode.                                                                                                                                                                                                                                            
    auth.clockskew                                      5000                                                                                                                                                                                                                                                                                                                                                                                                   allowed JWT Clock skew in milliseconds                                                                                                                                                                                                                                                                                          
    auth.contractvalidators                             [irma,uzi,dummy,employeeid]                                                                                                                                                                                                                                                                                                                                                                            sets the different contract validators to use                                                                                                                                                                                                                                                                                   
    auth.irma.autoupdateschemas                         true                                                                                                                                                                                                                                                                                                                                                                                                   set if you want automatically update the IRMA schemas every 60 minutes.                                                                                                                                                                                                                                                         
    auth.irma.schememanager                             pbdf                                                                                                                                                                                                                                                                                                                                                                                                   IRMA schemeManager to use for attributes. Can be either 'pbdf' or 'irma-demo'.                                                                                                                                                                                                                                                  
    **Crypto**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
    crypto.storage                                      fs                                                                                                                                                                                                                                                                                                                                                                                                     Storage to use, 'external' for an external backend (experimental), 'fs' for file system (for development purposes), 'vaultkv' for Vault KV store (recommended, will be replaced by external backend in future).                                                                                                                 
    crypto.external.address                                                                                                                                                                                                                                                                                                                                                                                                                                    Address of the external storage service.                                                                                                                                                                                                                                                                                        
    crypto.external.timeout                             100ms                                                                                                                                                                                                                                                                                                                                                                                                  Time-out when invoking the external storage backend, in Golang time.Duration string format (e.g. 1s).                                                                                                                                                                                                                           
    crypto.vault.address                                                                                                                                                                                                                                                                                                                                                                                                                                       The Vault address. If set it overwrites the VAULT_ADDR env var.                                                                                                                                                                                                                                                                 
    crypto.vault.pathprefix                             kv                                                                                                                                                                                                                                                                                                                                                                                                     The Vault path prefix.                                                                                                                                                                                                                                                                                                          
    crypto.vault.timeout                                5s                                                                                                                                                                                                                                                                                                                                                                                                     Timeout of client calls to Vault, in Golang time.Duration string format (e.g. 1s).                                                                                                                                                                                                                                              
    crypto.vault.token                                                                                                                                                                                                                                                                                                                                                                                                                                         The Vault token. If set it overwrites the VAULT_TOKEN env var.                                                                                                                                                                                                                                                                  
    **Discovery**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
    discovery.client.registration_refresh_interval      10m0s                                                                                                                                                                                                                                                                                                                                                                                                  Interval at which the client should refresh checks for registrations to refresh on the configured Discovery Services,in Golang time.Duration string format (e.g. 1s). Note that it only will actually refresh registrations that about to expire (less than 1/4th of their lifetime left).                                      
    discovery.definitions.directory                                                                                                                                                                                                                                                                                                                                                                                                                            Directory to load Discovery Service Definitions from. If not set, the discovery service will be disabled. If the directory contains JSON files that can't be parsed as service definition, the node will fail to start.                                                                                                         
    discovery.server.definition_ids                     []                                                                                                                                                                                                                                                                                                                                                                                                     IDs of the Discovery Service Definitions for which to act as server. If an ID does not map to a loaded service definition, the node will fail to start.                                                                                                                                                                         
    **Events**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
    events.nats.hostname                                0.0.0.0                                                                                                                                                                                                                                                                                                                                                                                                Hostname for the NATS server                                                                                                                                                                                                                                                                                                    
    events.nats.port                                    4222                                                                                                                                                                                                                                                                                                                                                                                                   Port where the NATS server listens on                                                                                                                                                                                                                                                                                           
    events.nats.storagedir                                                                                                                                                                                                                                                                                                                                                                                                                                     Directory where file-backed streams are stored in the NATS server                                                                                                                                                                                                                                                               
    events.nats.timeout                                 30                                                                                                                                                                                                                                                                                                                                                                                                     Timeout for NATS server operations                                                                                                                                                                                                                                                                                              
    **GoldenHammer**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
    goldenhammer.enabled                                true                                                                                                                                                                                                                                                                                                                                                                                                   Whether to enable automatically fixing DID documents with the required endpoints.                                                                                                                                                                                                                                               
    goldenhammer.interval                               10m0s                                                                                                                                                                                                                                                                                                                                                                                                  The interval in which to check for DID documents to fix.                                                                                                                                                                                                                                                                        
    **HTTP**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
    http.default.address                                \:1323                                                                                                                                                                                                                                                                                                                                                                                                  Address and port the server will be listening to                                                                                                                                                                                                                                                                                
    http.default.log                                    metadata                                                                                                                                                                                                                                                                                                                                                                                               What to log about HTTP requests. Options are 'nothing', 'metadata' (log request method, URI, IP and response code), and 'metadata-and-body' (log the request and response body, in addition to the metadata).                                                                                                                   
    http.default.tls                                                                                                                                                                                                                                                                                                                                                                                                                                           Whether to enable TLS for the default interface, options are 'disabled', 'server', 'server-client'. Leaving it empty is synonymous to 'disabled',                                                                                                                                                                               
    http.default.auth.audience                                                                                                                                                                                                                                                                                                                                                                                                                                 Expected audience for JWT tokens (default: hostname)                                                                                                                                                                                                                                                                            
    http.default.auth.authorizedkeyspath                                                                                                                                                                                                                                                                                                                                                                                                                       Path to an authorized_keys file for trusted JWT signers                                                                                                                                                                                                                                                                         
    http.default.auth.type                                                                                                                                                                                                                                                                                                                                                                                                                                     Whether to enable authentication for the default interface, specify 'token_v2' for bearer token mode or 'token' for legacy bearer token mode.                                                                                                                                                                                   
    http.default.cors.origin                            []                                                                                                                                                                                                                                                                                                                                                                                                     When set, enables CORS from the specified origins on the default HTTP interface.                                                                                                                                                                                                                                                
    **JSONLD**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
    jsonld.contexts.localmapping                        [https://w3id.org/vc/status-list/2021/v1=assets/contexts/w3c-statuslist2021.ldjson,https://w3c-ccg.github.io/lds-jws2020/contexts/lds-jws2020-v1.json=assets/contexts/lds-jws2020-v1.ldjson,https://schema.org=assets/contexts/schema-org-v13.ldjson,https://nuts.nl/credentials/v1=assets/contexts/nuts.ldjson,https://www.w3.org/2018/credentials/v1=assets/contexts/w3c-credentials-v1.ldjson]      This setting allows mapping external URLs to local files for e.g. preventing external dependencies. These mappings have precedence over those in remoteallowlist.                                                                                                                                                               
    jsonld.contexts.remoteallowlist                     [https://schema.org,https://www.w3.org/2018/credentials/v1,https://w3c-ccg.github.io/lds-jws2020/contexts/lds-jws2020-v1.json,https://w3id.org/vc/status-list/2021/v1]                                                                                                                                                                                                                                 In strict mode, fetching external JSON-LD contexts is not allowed except for context-URLs listed here.                                                                                                                                                                                                                          
    **Network**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
    network.bootstrapnodes                              []                                                                                                                                                                                                                                                                                                                                                                                                     List of bootstrap nodes ('<host>:<port>') which the node initially connect to.                                                                                                                                                                                                                                                  
    network.connectiontimeout                           5000                                                                                                                                                                                                                                                                                                                                                                                                   Timeout before an outbound connection attempt times out (in milliseconds).                                                                                                                                                                                                                                                      
    network.enablediscovery                             true                                                                                                                                                                                                                                                                                                                                                                                                   Whether to enable automatic connecting to other nodes.                                                                                                                                                                                                                                                                          
    network.enabletls                                   true                                                                                                                                                                                                                                                                                                                                                                                                   Whether to enable TLS for gRPC connections, which can be disabled for demo/development purposes. It is NOT meant for TLS offloading (see 'tls.offload'). Disabling TLS is not allowed in strict-mode.                                                                                                                           
    network.grpcaddr                                    \:5555                                                                                                                                                                                                                                                                                                                                                                                                  Local address for gRPC to listen on. If empty the gRPC server won't be started and other nodes will not be able to connect to this node (outbound connections can still be made).                                                                                                                                               
    network.maxbackoff                                  24h0m0s                                                                                                                                                                                                                                                                                                                                                                                                Maximum between outbound connections attempts to unresponsive nodes (in Golang duration format, e.g. '1h', '30m').                                                                                                                                                                                                              
    network.nodedid                                                                                                                                                                                                                                                                                                                                                                                                                                            Specifies the DID of the organization that operates this node, typically a vendor for EPD software. It is used to identify the node on the network. If the DID document does not exist of is deactivated, the node will not start.                                                                                              
    network.protocols                                   []                                                                                                                                                                                                                                                                                                                                                                                                     Specifies the list of network protocols to enable on the server. They are specified by version (1, 2). If not set, all protocols are enabled.                                                                                                                                                                                   
    network.v2.diagnosticsinterval                      5000                                                                                                                                                                                                                                                                                                                                                                                                   Interval (in milliseconds) that specifies how often the node should broadcast its diagnostic information to other nodes (specify 0 to disable).                                                                                                                                                                                 
    network.v2.gossipinterval                           5000                                                                                                                                                                                                                                                                                                                                                                                                   Interval (in milliseconds) that specifies how often the node should gossip its new hashes to other nodes.                                                                                                                                                                                                                       
    **PKI**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
    pki.maxupdatefailhours                              4                                                                                                                                                                                                                                                                                                                                                                                                      Maximum number of hours that a denylist update can fail                                                                                                                                                                                                                                                                         
    pki.softfail                                        true                                                                                                                                                                                                                                                                                                                                                                                                   Do not reject certificates if their revocation status cannot be established when softfail is true                                                                                                                                                                                                                               
    **Storage**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
    storage.bbolt.backup.directory                                                                                                                                                                                                                                                                                                                                                                                                                             Target directory for BBolt database backups.                                                                                                                                                                                                                                                                                    
    storage.bbolt.backup.interval                       0s                                                                                                                                                                                                                                                                                                                                                                                                     Interval, formatted as Golang duration (e.g. 10m, 1h) at which BBolt database backups will be performed.                                                                                                                                                                                                                        
    storage.redis.address                                                                                                                                                                                                                                                                                                                                                                                                                                      Redis database server address. This can be a simple 'host:port' or a Redis connection URL with scheme, auth and other options.                                                                                                                                                                                                  
    storage.redis.database                                                                                                                                                                                                                                                                                                                                                                                                                                     Redis database name, which is used as prefix every key. Can be used to have multiple instances use the same Redis instance.                                                                                                                                                                                                     
    storage.redis.password                                                                                                                                                                                                                                                                                                                                                                                                                                     Redis database password. If set, it overrides the username in the connection URL.                                                                                                                                                                                                                                               
    storage.redis.username                                                                                                                                                                                                                                                                                                                                                                                                                                     Redis database username. If set, it overrides the username in the connection URL.                                                                                                                                                                                                                                               
    storage.redis.sentinel.master                                                                                                                                                                                                                                                                                                                                                                                                                              Name of the Redis Sentinel master. Setting this property enables Redis Sentinel.                                                                                                                                                                                                                                                
    storage.redis.sentinel.nodes                        []                                                                                                                                                                                                                                                                                                                                                                                                     Addresses of the Redis Sentinels to connect to initially. Setting this property enables Redis Sentinel.                                                                                                                                                                                                                         
    storage.redis.sentinel.password                                                                                                                                                                                                                                                                                                                                                                                                                            Password for authenticating to Redis Sentinels.                                                                                                                                                                                                                                                                                 
    storage.redis.sentinel.username                                                                                                                                                                                                                                                                                                                                                                                                                            Username for authenticating to Redis Sentinels.                                                                                                                                                                                                                                                                                 
    storage.redis.tls.truststorefile                                                                                                                                                                                                                                                                                                                                                                                                                           PEM file containing the trusted CA certificate(s) for authenticating remote Redis servers. Can only be used when connecting over TLS (use 'rediss://' as scheme in address).                                                                                                                                                    
    storage.sql.connection                                                                                                                                                                                                                                                                                                                                                                                                                                     Connection string for the SQL database. If not set it, defaults to a SQLite database stored inside the configured data directory. Note: using SQLite is not recommended in production environments. If using SQLite anyways, remember to enable foreign keys ('_foreign_keys=on') and the write-ahead-log ('_journal_mode=WAL').
    **VCR**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
    vcr.openid4vci.definitionsdir                                                                                                                                                                                                                                                                                                                                                                                                                              Directory with the additional credential definitions the node could issue (experimental, may change without notice).                                                                                                                                                                                                            
    vcr.openid4vci.enabled                              true                                                                                                                                                                                                                                                                                                                                                                                                   Enable issuing and receiving credentials over OpenID4VCI.                                                                                                                                                                                                                                                                       
    vcr.openid4vci.timeout                              30s                                                                                                                                                                                                                                                                                                                                                                                                    Time-out for OpenID4VCI HTTP client operations.                                                                                                                                                                                                                                                                                 
    **policy**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
    policy.address                                                                                                                                                                                                                                                                                                                                                                                                                                             The address of a remote policy server. Mutual exclusive with policy.directory.                                                                                                                                                                                                                                                  
    policy.directory                                                                                                                                                                                                                                                                                                                                                                                                                                           Directory to read policy files from. Policy files are JSON files that contain a scope to PresentationDefinition mapping. Mutual exclusive with policy.address.                                                                                                                                                                  
    ==============================================      =================================================================================================================================================================================================================================================================================================================================================================================================      ================================================================================================================================================================================================================================================================================================================================
