.. table:: Server Options
    :widths: 20 30 50
    :class: options-table

    ========================================      ===================================================================================================================================================================================================================================================================================================================================================================================================================================================================      ============================================================================================================================================================================================================================================================================================================================================
    Key                                           Default                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Description                                                                                                                                                                                                                                                                                                                                 
    ========================================      ===================================================================================================================================================================================================================================================================================================================================================================================================================================================================      ============================================================================================================================================================================================================================================================================================================================================
    configfile                                    ./config/nuts.yaml                                                                                                                                                                                                                                                                                                                                                                                                                                                       Nuts config file                                                                                                                                                                                                                                                                                                                            
    cpuprofile                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             When set, a CPU profile is written to the given path. Ignored when strictmode is set.                                                                                                                                                                                                                                                       
    datadir                                       ./data                                                                                                                                                                                                                                                                                                                                                                                                                                                                   Directory where the node stores its files.                                                                                                                                                                                                                                                                                                  
    didmethods                                    [web,nuts]                                                                                                                                                                                                                                                                                                                                                                                                                                                               Comma-separated list of enabled DID methods (without did: prefix). It also controls the order in which DIDs are returned by APIs, and which DID is used for signing if the verifying party does not impose restrictions on the DID method used.                                                                                             
    internalratelimiter                           true                                                                                                                                                                                                                                                                                                                                                                                                                                                                     When set, expensive internal calls are rate-limited to protect the network. Always enabled in strict mode.                                                                                                                                                                                                                                  
    loggerformat                                  text                                                                                                                                                                                                                                                                                                                                                                                                                                                                     Log format (text, json)                                                                                                                                                                                                                                                                                                                     
    strictmode                                    true                                                                                                                                                                                                                                                                                                                                                                                                                                                                     When set, insecure settings are forbidden.                                                                                                                                                                                                                                                                                                  
    url                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    Public facing URL of the server (required). Must be HTTPS when strictmode is set.                                                                                                                                                                                                                                                           
    verbosity                                     info                                                                                                                                                                                                                                                                                                                                                                                                                                                                     Log level (trace, debug, info, warn, error)                                                                                                                                                                                                                                                                                                 
    httpclient.timeout                            30s                                                                                                                                                                                                                                                                                                                                                                                                                                                                      Request time-out for HTTP clients, such as '10s'. Refer to Golang's 'time.Duration' syntax for a more elaborate description of the syntax.                                                                                                                                                                                                  
    **Auth**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
    auth.authorizationendpoint.enabled            false                                                                                                                                                                                                                                                                                                                                                                                                                                                                    enables the v2 API's OAuth2 Authorization Endpoint, used by OpenID4VP and OpenID4VCI. This flag might be removed in a future version (or its default become 'true') as the use cases and implementation of OpenID4VP and OpenID4VCI mature.                                                                                                 
    **Crypto**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
    crypto.storage                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         Storage to use, 'fs' for file system (for development purposes), 'vaultkv' for HashiCorp Vault KV store, 'azure-keyvault' for Azure Key Vault, 'external' for an external backend (deprecated).                                                                                                                                             
    crypto.azurekv.hsm                            false                                                                                                                                                                                                                                                                                                                                                                                                                                                                    Whether to store the key in a hardware security module (HSM). If true, the Azure Key Vault must be configured for HSM usage. Default: false                                                                                                                                                                                                 
    crypto.azurekv.timeout                        10s                                                                                                                                                                                                                                                                                                                                                                                                                                                                      Timeout of client calls to Azure Key Vault, in Golang time.Duration string format (e.g. 10s).                                                                                                                                                                                                                                               
    crypto.azurekv.url                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     The URL of the Azure Key Vault.                                                                                                                                                                                                                                                                                                             
    crypto.azurekv.auth.type                      default                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Credential type to use when authenticating to the Azure Key Vault. Options: default, managed_identity (see https://github.com/Azure/azure-sdk-for-go/blob/main/sdk/azidentity/README.md for an explanation of the options).                                                                                                                 
    crypto.vault.address                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   The Vault address. If set it overwrites the VAULT_ADDR env var.                                                                                                                                                                                                                                                                             
    crypto.vault.pathprefix                       kv                                                                                                                                                                                                                                                                                                                                                                                                                                                                       The Vault path prefix.                                                                                                                                                                                                                                                                                                                      
    crypto.vault.timeout                          5s                                                                                                                                                                                                                                                                                                                                                                                                                                                                       Timeout of client calls to Vault, in Golang time.Duration string format (e.g. 1s).                                                                                                                                                                                                                                                          
    crypto.vault.token                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     The Vault token. If set it overwrites the VAULT_TOKEN env var.                                                                                                                                                                                                                                                                              
    **Discovery**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
    discovery.client.refreshinterval              10m0s                                                                                                                                                                                                                                                                                                                                                                                                                                                                    Interval at which the client synchronizes with the Discovery Server; refreshing Verifiable Presentations of local DIDs and loading changes, updating the local copy. It only will actually refresh registrations of local DIDs that about to expire (less than 1/4th of their lifetime left). Specified as Golang duration (e.g. 1m, 1h30m).
    discovery.definitions.directory               ./config/discovery                                                                                                                                                                                                                                                                                                                                                                                                                                                       Directory to load Discovery Service Definitions from. If not set, the discovery service will be disabled. If the directory contains JSON files that can't be parsed as service definition, the node will fail to start.                                                                                                                     
    discovery.server.ids                          []                                                                                                                                                                                                                                                                                                                                                                                                                                                                       IDs of the Discovery Service for which to act as server. If an ID does not map to a loaded service definition, the node will fail to start.                                                                                                                                                                                                 
    **HTTP**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
    http.clientipheader                           X-Forwarded-For                                                                                                                                                                                                                                                                                                                                                                                                                                                          Case-sensitive HTTP Header that contains the client IP used for audit logs. For the X-Forwarded-For header only link-local, loopback, and private IPs are excluded. Switch to X-Real-IP or a custom header if you see your own proxy/infra in the logs.                                                                                     
    http.log                                      metadata                                                                                                                                                                                                                                                                                                                                                                                                                                                                 What to log about HTTP requests. Options are 'nothing', 'metadata' (log request method, URI, IP and response code), and 'metadata-and-body' (log the request and response body, in addition to the metadata). When debug vebosity is set the authorization headers are also logged when the request is fully logged.                        
    http.cache.maxbytes                           10485760                                                                                                                                                                                                                                                                                                                                                                                                                                                                 HTTP client maximum size of the response cache in bytes. If 0, the HTTP client does not cache responses.                                                                                                                                                                                                                                    
    http.internal.address                         127.0.0.1:8081                                                                                                                                                                                                                                                                                                                                                                                                                                                           Address and port the server will be listening to for internal-facing endpoints.                                                                                                                                                                                                                                                             
    http.internal.auth.audience                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Expected audience for JWT tokens (default: hostname)                                                                                                                                                                                                                                                                                        
    http.internal.auth.authorizedkeyspath                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Path to an authorized_keys file for trusted JWT signers                                                                                                                                                                                                                                                                                     
    http.internal.auth.type                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Whether to enable authentication for /internal endpoints, specify 'token_v2' for bearer token mode or 'token' for legacy bearer token mode.                                                                                                                                                                                                 
    http.public.address                           \:8080                                                                                                                                                                                                                                                                                                                                                                                                                                                                    Address and port the server will be listening to for public-facing endpoints.                                                                                                                                                                                                                                                               
    **JSONLD**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
    jsonld.contexts.localmapping                  [https://nuts.nl/credentials/2024=assets/contexts/nuts-2024.ldjson,https://nuts.nl/credentials/v1=assets/contexts/nuts.ldjson,https://schema.org=assets/contexts/schema-org-v13.ldjson,https://w3c-ccg.github.io/lds-jws2020/contexts/lds-jws2020-v1.json=assets/contexts/lds-jws2020-v1.ldjson,https://w3id.org/vc/status-list/2021/v1=assets/contexts/w3c-statuslist2021.ldjson,https://www.w3.org/2018/credentials/v1=assets/contexts/w3c-credentials-v1.ldjson]      This setting allows mapping external URLs to local files for e.g. preventing external dependencies. These mappings have precedence over those in remoteallowlist.                                                                                                                                                                           
    jsonld.contexts.remoteallowlist               [https://schema.org,https://www.w3.org/2018/credentials/v1,https://w3c-ccg.github.io/lds-jws2020/contexts/lds-jws2020-v1.json,https://w3id.org/vc/status-list/2021/v1]                                                                                                                                                                                                                                                                                                   In strict mode, fetching external JSON-LD contexts is not allowed except for context-URLs listed here.                                                                                                                                                                                                                                      
    **PKI**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
    pki.maxupdatefailhours                        4                                                                                                                                                                                                                                                                                                                                                                                                                                                                        Maximum number of hours that a denylist update can fail                                                                                                                                                                                                                                                                                     
    pki.softfail                                  true                                                                                                                                                                                                                                                                                                                                                                                                                                                                     Do not reject certificates if their revocation status cannot be established when softfail is true                                                                                                                                                                                                                                           
    **Storage**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
    storage.session.memcached.address             []                                                                                                                                                                                                                                                                                                                                                                                                                                                                       List of Memcached server addresses. These can be a simple 'host:port' or a Memcached connection URL with scheme, auth and other options.                                                                                                                                                                                                    
    storage.session.redis.address                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Redis session database server address. This can be a simple 'host:port' or a Redis connection URL with scheme, auth and other options. If not set it, defaults to an in-memory database.                                                                                                                                                    
    storage.session.redis.database                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         Redis session database name, which is used as prefix every key. Can be used to have multiple instances use the same Redis instance.                                                                                                                                                                                                         
    storage.session.redis.password                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         Redis session database password. If set, it overrides the username in the connection URL.                                                                                                                                                                                                                                                   
    storage.session.redis.username                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         Redis session database username. If set, it overrides the username in the connection URL.                                                                                                                                                                                                                                                   
    storage.session.redis.sentinel.master                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Name of the Redis Sentinel master. Setting this property enables Redis Sentinel.                                                                                                                                                                                                                                                            
    storage.session.redis.sentinel.nodes          []                                                                                                                                                                                                                                                                                                                                                                                                                                                                       Addresses of the Redis Sentinels to connect to initially. Setting this property enables Redis Sentinel.                                                                                                                                                                                                                                     
    storage.session.redis.sentinel.password                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Password for authenticating to Redis Sentinels.                                                                                                                                                                                                                                                                                             
    storage.session.redis.sentinel.username                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Username for authenticating to Redis Sentinels.                                                                                                                                                                                                                                                                                             
    storage.session.redis.tls.truststorefile                                                                                                                                                                                                                                                                                                                                                                                                                                                                               PEM file containing the trusted CA certificate(s) for authenticating remote Redis session servers. Can only be used when connecting over TLS (use 'rediss://' as scheme in address).                                                                                                                                                        
    storage.sql.connection                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 Connection string for the SQL database. If not set it, defaults to a SQLite database stored inside the configured data directory. Note: using SQLite is not recommended in production environments. If using SQLite anyways, remember to enable foreign keys ('_foreign_keys=on') and the write-ahead-log ('_journal_mode=WAL').            
    **policy**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
    policy.directory                              ./config/policy                                                                                                                                                                                                                                                                                                                                                                                                                                                          Directory to read policy files from. Policy files are JSON files that contain a scope to PresentationDefinition mapping.                                                                                                                                                                                                                    
    ========================================      ===================================================================================================================================================================================================================================================================================================================================================================================================================================================================      ============================================================================================================================================================================================================================================================================================================================================
